# Supabase Database Setup

## إذا كنت تبدأ من الصفر (مشروع جديد)
شغل الملف الكامل في Supabase SQL Editor:
```
schema.sql
```

هذا الملف راح يعمل كل شيء:
- إنشاء الجداول
- إنشاء الـ Indexes
- إنشاء الـ Policies
- إنشاء الـ Triggers
- توليد أكواد للمستخدمين القدام (إذا موجودين)

## إذا عندك قاعدة بيانات موجودة (Migration)
إذا عندك مستخدمين موجودين وتريد إضافة ميزة partner_code، شغل:
```
migration_add_partner_code.sql
```

هذا الملف راح:
1. يضيف عمود partner_code إلى جدول users
2. ينشئ index للبحث السريع
3. يولد أكواد عشوائية فريدة (10 أحرف/أرقام) لكل المستخدمين القدام

## ملاحظات مهمة
- كل كود فريد من نوعه (10 أحرف وأرقام عشوائية)
- الأكواد تستخدم أحرف وأرقام واضحة فقط (بدون O, 0, I, 1, L لتجنب الالتباس)
- التطبيق راح يولد كود تلقائياً للمستخدمين القدام عند أول تسجيل دخول
- الكود يستخدم للربط بين الشركاء (Couples)

## رابط Supabase SQL Editor
https://supabase.com/dashboard/project/cobhopfnjktuwpxkejlz/sql
